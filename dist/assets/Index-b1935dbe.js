import{_ as A,u as k,r as m,y as x,h as P,b as l,o as R,c as M,e as o,d as t,w as a,t as f,g as v}from"./main-5d00e0ed.js";import{g as L}from"./vehicle-30f80322.js";import{g as O}from"./driver-efd12400.js";import{g as V}from"./application-e8a4b6ce.js";const G={name:"DashboardIndex",setup(){const w=k(),s=m(0),b=m(0),e=x(()=>g.value.filter(n=>n.status==="PENDING").length),E=m(12),g=m([]),y=m([{id:"DIS001",driver:"张师傅",vehicle:"京A12345",route:"公司-客户A",status:"已完成"},{id:"DIS002",driver:"李师傅",vehicle:"京A12346",route:"公司-客户B",status:"进行中"},{id:"DIS003",driver:"王师傅",vehicle:"京A12347",route:"公司-客户C",status:"待出发"},{id:"DIS004",driver:"赵师傅",vehicle:"京A12348",route:"公司-客户D",status:"进行中"},{id:"DIS005",driver:"钱师傅",vehicle:"京A12349",route:"公司-客户E",status:"已完成"}]),r=n=>{w.push(n)},c=n=>({PENDING:"warning",APPROVED:"success",REJECTED:"danger",COMPLETED:"info",ASSIGNED:"primary",IN_PROGRESS:"primary"})[n]||"info",u=n=>({PENDING:"待审批",APPROVED:"已批准",REJECTED:"已拒绝",COMPLETED:"已完成",ASSIGNED:"已指派",IN_PROGRESS:"进行中"})[n]||"未知",C=n=>({待出发:"info",进行中:"primary",已完成:"success",已取消:"danger"})[n]||"info",D=async()=>{try{const n=await L(1,1e3);s.value=n.data.total;const _=await O(1,1e3);b.value=_.data.total;const h=await V(1,5);g.value=h.data.list.map(i=>({id:i.id,applicationNo:i.applicationNo,applicantName:i.applicantName,endLocation:i.endLocation,status:i.status}))}catch(n){console.error("获取统计数据失败：",n)}};return P(()=>{D()}),{vehicleCount:s,driverCount:b,applicationCount:e,dispatchCount:E,recentApplications:g,todayDispatches:y,navigateTo:r,getStatusType:c,getStatusText:u,getDispatchStatusType:C}}},B={class:"dashboard"},F={class:"stat-item"},J={class:"stat-icon",style:{"background-color":"#409EFF"}},U={class:"stat-content"},q={class:"stat-value"},j={class:"stat-item"},z={class:"stat-icon",style:{"background-color":"#67C23A"}},H={class:"stat-content"},K={class:"stat-value"},Q={class:"stat-item"},W={class:"stat-icon",style:{"background-color":"#E6A23C"}},X={class:"stat-content"},Y={class:"stat-value"},Z={class:"stat-item"},$={class:"stat-icon",style:{"background-color":"#F56C6C"}},tt={class:"stat-content"},st={class:"stat-value"},at={class:"action-buttons"},ot={class:"card-header"},et={class:"card-header"};function nt(w,s,b,e,E,g){const y=l("Van"),r=l("el-icon"),c=l("el-card"),u=l("el-col"),C=l("User"),D=l("Document"),n=l("Position"),_=l("el-row"),h=l("Edit"),i=l("el-button"),N=l("Odometer"),I=l("TrendCharts"),p=l("el-table-column"),S=l("el-tag"),T=l("el-table");return R(),M("div",B,[s[19]||(s[19]=o("h2",null,"仪表板",-1)),s[20]||(s[20]=o("p",null,"欢迎使用车辆管理系统",-1)),t(_,{gutter:20,class:"stats-row"},{default:a(()=>[t(u,{span:6},{default:a(()=>[t(c,{class:"stat-card"},{default:a(()=>[o("div",F,[o("div",J,[t(r,null,{default:a(()=>[t(y)]),_:1})]),o("div",U,[o("div",q,f(e.vehicleCount),1),s[6]||(s[6]=o("div",{class:"stat-label"},"车辆总数",-1))])])]),_:1})]),_:1}),t(u,{span:6},{default:a(()=>[t(c,{class:"stat-card"},{default:a(()=>[o("div",j,[o("div",z,[t(r,null,{default:a(()=>[t(C)]),_:1})]),o("div",H,[o("div",K,f(e.driverCount),1),s[7]||(s[7]=o("div",{class:"stat-label"},"驾驶员总数",-1))])])]),_:1})]),_:1}),t(u,{span:6},{default:a(()=>[t(c,{class:"stat-card"},{default:a(()=>[o("div",Q,[o("div",W,[t(r,null,{default:a(()=>[t(D)]),_:1})]),o("div",X,[o("div",Y,f(e.applicationCount),1),s[8]||(s[8]=o("div",{class:"stat-label"},"待审批申请",-1))])])]),_:1})]),_:1}),t(u,{span:6},{default:a(()=>[t(c,{class:"stat-card"},{default:a(()=>[o("div",Z,[o("div",$,[t(r,null,{default:a(()=>[t(n)]),_:1})]),o("div",tt,[o("div",st,f(e.dispatchCount),1),s[9]||(s[9]=o("div",{class:"stat-label"},"今日调度",-1))])])]),_:1})]),_:1})]),_:1}),t(_,{gutter:20,class:"quick-actions"},{default:a(()=>[t(u,{span:24},{default:a(()=>[t(c,null,{header:a(()=>[...s[10]||(s[10]=[o("div",{class:"card-header"},[o("span",null,"快捷操作")],-1)])]),default:a(()=>[o("div",at,[t(i,{type:"primary",onClick:s[0]||(s[0]=d=>e.navigateTo("/application/create"))},{default:a(()=>[t(r,null,{default:a(()=>[t(h)]),_:1}),s[11]||(s[11]=v(" 申请用车 ",-1))]),_:1}),t(i,{type:"success",onClick:s[1]||(s[1]=d=>e.navigateTo("/vehicle/list"))},{default:a(()=>[t(r,null,{default:a(()=>[t(y)]),_:1}),s[12]||(s[12]=v(" 查看车辆 ",-1))]),_:1}),t(i,{type:"warning",onClick:s[2]||(s[2]=d=>e.navigateTo("/dispatch/monitor"))},{default:a(()=>[t(r,null,{default:a(()=>[t(N)]),_:1}),s[13]||(s[13]=v(" 实时监控 ",-1))]),_:1}),t(i,{type:"danger",onClick:s[3]||(s[3]=d=>e.navigateTo("/statistics/usage"))},{default:a(()=>[t(r,null,{default:a(()=>[t(I)]),_:1}),s[14]||(s[14]=v(" 数据统计 ",-1))]),_:1})])]),_:1})]),_:1})]),_:1}),t(_,{gutter:20,class:"recent-activities"},{default:a(()=>[t(u,{span:12},{default:a(()=>[t(c,null,{header:a(()=>[o("div",ot,[s[16]||(s[16]=o("span",null,"最近用车申请",-1)),t(i,{class:"button",text:"",onClick:s[4]||(s[4]=d=>e.navigateTo("/application/list"))},{default:a(()=>[...s[15]||(s[15]=[v("查看全部",-1)])]),_:1})])]),default:a(()=>[t(T,{data:e.recentApplications,style:{width:"100%"}},{default:a(()=>[t(p,{prop:"applicationNo",label:"申请单号",width:"150"}),t(p,{prop:"applicantName",label:"申请人",width:"100"}),t(p,{prop:"endLocation",label:"目的地","show-overflow-tooltip":""}),t(p,{prop:"status",label:"状态",width:"100"},{default:a(d=>[t(S,{type:e.getStatusType(d.row.status)},{default:a(()=>[v(f(e.getStatusText(d.row.status)),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),t(u,{span:12},{default:a(()=>[t(c,null,{header:a(()=>[o("div",et,[s[18]||(s[18]=o("span",null,"今日调度任务",-1)),t(i,{class:"button",text:"",onClick:s[5]||(s[5]=d=>e.navigateTo("/dispatch/list"))},{default:a(()=>[...s[17]||(s[17]=[v("查看全部",-1)])]),_:1})])]),default:a(()=>[t(T,{data:e.todayDispatches,style:{width:"100%"}},{default:a(()=>[t(p,{prop:"id",label:"调度编号",width:"100"}),t(p,{prop:"driver",label:"驾驶员",width:"120"}),t(p,{prop:"vehicle",label:"车辆",width:"120"}),t(p,{prop:"route",label:"路线"}),t(p,{prop:"status",label:"状态",width:"100"},{default:a(d=>[t(S,{type:e.getDispatchStatusType(d.row.status)},{default:a(()=>[v(f(d.row.status),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})])}const ct=A(G,[["render",nt],["__scopeId","data-v-92a0d8ed"]]);export{ct as default};
