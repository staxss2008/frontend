import{_ as v,u as x,r as p,a as b,b as l,o as V,c as h,d as o,w as a,e as m,f as k,g as I,l as N,E as z}from"./main-5d00e0ed.js";const B={class:"login-container"},C={__name:"Index",setup(E){const _=x(),d=p(null),t=p(!1),s=b({username:"",password:""}),g={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},u=async()=>{await d.value.validate(async i=>{if(i){t.value=!0;try{const e=await N(s);localStorage.setItem("token",e.data.token),localStorage.setItem("userInfo",JSON.stringify(e.data)),z.success("登录成功"),_.push("/")}catch(e){console.error(e)}finally{t.value=!1}}})};return(i,e)=>{const c=l("el-input"),r=l("el-form-item"),f=l("el-button"),w=l("el-form"),y=l("el-card");return V(),h("div",B,[o(y,{class:"login-card"},{header:a(()=>[...e[2]||(e[2]=[m("div",{class:"login-header"},[m("h2",null,"派车管理系统")],-1)])]),default:a(()=>[o(w,{model:s,rules:g,ref_key:"loginFormRef",ref:d,"label-width":"0"},{default:a(()=>[o(r,{prop:"username"},{default:a(()=>[o(c,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=n=>s.username=n),placeholder:"请输入用户名","prefix-icon":"User",size:"large"},null,8,["modelValue"])]),_:1}),o(r,{prop:"password"},{default:a(()=>[o(c,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=n=>s.password=n),type:"password",placeholder:"请输入密码","prefix-icon":"Lock",size:"large","show-password":"",onKeyup:k(u,["enter"])},null,8,["modelValue"])]),_:1}),o(r,null,{default:a(()=>[o(f,{type:"primary",size:"large",style:{width:"100%"},loading:t.value,onClick:u},{default:a(()=>[...e[3]||(e[3]=[I(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}},R=v(C,[["__scopeId","data-v-abdaa174"]]);export{R as default};
